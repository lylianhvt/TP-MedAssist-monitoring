{
  "__inputs": [
    {
      "name": "DS_PROMETHEUS",
      "label": "Prometheus",
      "description": "",
      "type": "datasource",
      "pluginId": "prometheus",
      "pluginName": "Prometheus"
    }
  ],
  "title": "RED Method - API Monitoring",
  "panels": [
    {
      "type": "graph",
      "title": "Request Rate (req/s)",
      "targets": [{"expr": "sum(rate(flask_http_request_total[1m])) by (method, endpoint)", "legendFormat": "{{method}} {{endpoint}}"}],
      "gridPos": {"h": 8, "w": 12, "x": 0, "y": 0}
    },
    {
      "type": "graph",
      "title": "Error Rate (5xx)",
      "targets": [{"expr": "sum(rate(flask_http_request_total{status=\"500\"}[1m])) by (endpoint)", "legendFormat": "{{endpoint}}"}],
      "gridPos": {"h": 8, "w": 12, "x": 12, "y": 0}
    },
    {
      "type": "graph",
      "title": "Request Duration (ms)",
      "targets": [{"expr": "histogram_quantile(0.95, sum(rate(flask_http_request_duration_seconds_bucket[1m])) by (le, endpoint)) * 1000", "legendFormat": "p95 {{endpoint}}"}],
      "gridPos": {"h": 8, "w": 24, "x": 0, "y": 8}
    }
  ],
  "schemaVersion": 27,
  "version": 1,
  "refresh": "10s",
  "datasource": null
}
